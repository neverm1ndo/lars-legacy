<div class="playerlog h-100 nopadding d-flex flex-column flex-fill align-self-stretch">
  <div class="wrapper-main overflow-auto d-flex align-items-stretch flex-fill">
    <div class="col-12 h-100">
      <div class="row h-100">
        <div class="col-8 h-100">
          <div class="row h-100">
            <div class="d-flex flex-column h-100 w-100">
              <div class="d-flex align-self-start head w-100">
                <div class="col-12">
                  <div class="row">
                    <div class="col-12">
                      <h1 class="mt-4 mb-4">Раздел резервных копий</h1>
                      <p>ВНИМАНИЕ: Удаление и перезапись бэкапов может привести к безвозвратному удалению данных с рабочего игрового сервера</p>
                    </div>
                    <!-- <div class="col-12 mb-3">
                      <div class="row">
                        <form (keyup.enter)="sendQuery()" class="col-8 pr-0" (ngSubmit)="sendQuery()" autocomplete="off">
                          <div class="input-group">
                            <input name="search" type="text" class="form-control shadow-none align-middle input-dark" placeholder="Поиск по имени файла"/>
                          </div>
                        </form>
                      </div>
                    </div> -->
                  </div>
                </div>
              </div>
              <div class="d-flex h-100 flex-row overflow-auto pl-2">
                <div #binds class="binds"></div>
                <div #backupsList  class="d-flex flex-column backups-list w-100 pr-2">
                  <app-backup-item *ngFor="let backup of backups" [attr.data-filename]="backup.file.name" [backup-info]="backup" (currentToView)="current = $event"></app-backup-item>
                </div>
              </div>
              <div *ngIf="current" class="d-flex h-100 flex-column viewer">
                <div class="d-flex flex-row justify-content-between viewer-head align-items-center">
                  <!-- <span [style.background]="colorGenerator(['text_map.map.off'])[0]" class="badge">text_map.map.off</span> -->
                  <!-- <div [style.background]="colorGenerator(['wd.js'])[0]" class="d-flex h-100"> -->
                    <span class="p-2"><i [style.background]="colorGenerator([current.file.name])[0]"></i>{{current.file.name}}</span>
                    <span class="align-self-center text-muted p-2">654 bytes</span>
                  <!-- </div> -->
                  <span class="text-muted">{{current.date}}</span>
                  <button class="btn btn-success" type="button" name="button">Установить</button>
                </div>
                <div class="d-flex flex-fill viewer-code overflow-auto">
                  <pre class="w-100">{{current.file.text}}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-4 h-100 history">
          <div class="row h-100">
            <div class="d-flex flex-column h-100 w-100">
              <div class="w-100 d-flex align-self-start align-items-center justify-content-center">
                <div class="p-3 history-head w-100 text-center">
                  <span>История изменений файлов</span>
                </div>
              </div>
              <div class="d-flex flex-fill flex-column overflow-auto">
                <div class="d-flex flex-row changes-card" *ngFor="let change of backups">
                  <div class="d-flex align-self-start">
                    <span>
                      <strong>{{change.user.nickname}}</strong><i> изменил файл</i><span> {{change.file.name}}</span>
                    </span>
                  </div>
                  <div class="d-flex align-self-center changes-card-date">
                    <div class="d-flex">
                      <span class=text-muted>
                        {{ change.date | date:'d MMM yy' }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
