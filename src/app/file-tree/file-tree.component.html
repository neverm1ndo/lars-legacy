<div class="d-flex align-items-start flex-column h-100">
  <div class="w-100 top">
    <div class="col-12 d-flex text-center justify-content-start">
      <lty-icon name="lty-fs-tree"></lty-icon>
      <span class="mr-3">Файлы</span>
      <div class="d-flex flex-row">
        <button title="Обновить" class="btn btn-dark sync" (click)="sync()" name="sync"><fa-icon [icon]="fa.sync"></fa-icon></button>
        <button title="Создать новую папку" class="btn btn-dark sync" (click)="popup = true" name="mkdir"><fa-icon [icon]="fa.folderPlus"></fa-icon></button>
      </div>
    </div>
  </div>
  <div class="col-12 pr-0 pl-0 no-padding flex-fill overflow-auto">
    <div *ngIf="node; else loaderItems" class="text-left">
      <file-tree-items
      (chooseFileEvent)="getConfig($event)"
      (chooseDirEvent)="chooseDir($event)"
      (rmDirEvent)="rmDir($event)"
      [isRoot]="true"
      [child-nodes]="node"
      [expanded]="true"
      [current]="current"
      (uploadFileList)="upload($event)">
      </file-tree-items>
    </div>
    <ng-template #loaderItems>
      <div class="d-flex h-100">
        <div class="loader w-100 loader-items d-flex align-self-center justify-content-center">
          <lty-icon name="lty-logo" anim="spinner-logo"></lty-icon>
        </div>
      </div>
    </ng-template>
  </div>
  <div *ngIf="node" class="texteditor-underpanel no-select align-self-end w-100">
    <div class="col-12">
      <div class="row">
        <div class="w-100 d-flex flex-row justify-content-between">
          <div class="panel-left">
            <button class="panel">
              <fa-icon [icon]="fa.file"></fa-icon> {{ node.items.length }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<form [formGroup]="addNewDir" (ngSubmit)="mkdir()" *ngIf="popup" @settings class="popup d-flex flex-row justify-content-center align-items-center">
  <div class="popup-window d-flex flex-column">
    <div class="popup-window-head">
      <h5><fa-icon class="mr-3" [icon]="fa.folderPlus"></fa-icon> Новая директория</h5>
    </div>
    <div class="popup-window-body">
      <div class="row">
        <div class="col-12">
          <div class="form-group">
            <label for="newDirInput"><small>Путь директории от корня дерева</small></label>
            <input type="text"
                   placeholder="Путь директории от корня дерева"
                   class="form-control"
                   name="newDirInput"
                   id="newDirInput"
                   aria-describedby="nickname"
                   formControlName="path"
                   required>
          </div>
        </div>
      </div>
    </div>
    <div class="popup-window-footer text-center">
      <div class="col-12">
        <div class="row">
          <div class="col-6 pl-0">
            <button type="submit" class="btn btn-light w-100" name="button">Добавить</button>
          </div>
          <div class="col-6 pr-0">
            <button type="button" (click)="popup = false" class="btn btn-danger w-100" name="button">Отмена</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
